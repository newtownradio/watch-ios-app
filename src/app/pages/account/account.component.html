<div class="account-container">
  <div class="page-header">
    <h1>Account</h1>
    <p>Manage your profile and track your activity</p>
  </div>

  <!-- User Profile Section -->
  <div class="profile-section" *ngIf="currentUser">
    <h2>Profile</h2>
    <div class="profile-card">
      <div class="profile-avatar">
        <span>{{ getInitials(currentUser.name) }}</span>
      </div>
      <div class="profile-info">
        <h3>{{ currentUser.name }}</h3>
        <p>{{ currentUser.email }}</p>
        <div class="profile-stats">
          <div class="stat">
            <span class="stat-label">Member Since:</span>
            <span class="stat-value">{{ getMemberSince() }}</span>
          </div>
          <div class="stat">
            <span class="stat-label">Verification:</span>
            <span class="stat-value" [class]="currentUser.idVerified ? 'verified' : 'unverified'">
              {{ currentUser.idVerified ? 'âœ“ Verified' : 'âš  Unverified' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Activity Summary -->
  <div class="activity-summary">
    <h2>Activity Summary</h2>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <h3>{{ userStats.listings }}</h3>
          <p>Active Listings</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-content">
          <h3>{{ userStats.bids }}</h3>
          <p>Bids Received</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ¤</div>
        <div class="stat-content">
          <h3>{{ userStats.sales }}</h3>
          <p>Completed Sales</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ’¬</div>
        <div class="stat-content">
          <h3>{{ userStats.messages }}</h3>
          <p>Unread Messages</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Orders/Transactions -->
  <div class="orders-section">
    <h2>Recent Orders</h2>
    <div class="orders-list" *ngIf="recentOrders.length > 0">
      <div class="order-item" *ngFor="let order of recentOrders">
        <div class="order-header">
          <h4>{{ order.title }}</h4>
          <span class="order-status" [class]="order.status">{{ order.status }}</span>
        </div>
        <div class="order-details">
          <p><strong>Price:</strong> ${{ order.price.toLocaleString() }}</p>
          <p><strong>Date:</strong> {{ order.date | date:'medium' }}</p>
          <p><strong>Order ID:</strong> {{ order.id }}</p>
        </div>
        <div class="order-actions">
          <button class="btn-secondary" (click)="viewOrderDetails(order.id)">
            View Details
          </button>
        </div>
      </div>
    </div>
    <div class="empty-state" *ngIf="recentOrders.length === 0">
      <div class="empty-icon">ğŸ“¦</div>
      <h3>No orders yet</h3>
      <p>Your completed transactions will appear here.</p>
    </div>
  </div>

  <!-- Important Records -->
  <div class="records-section">
    <h2>Important Records</h2>
    <div class="records-grid">
      <div class="record-card">
        <div class="record-icon">ğŸ“„</div>
        <div class="record-content">
          <h4>Government ID</h4>
          <p>{{ currentUser?.governmentIdUrl ? 'âœ“ Uploaded' : 'âš  Required for transactions' }}</p>
          <button class="btn-secondary" (click)="uploadGovernmentId()">
            {{ currentUser?.governmentIdUrl ? 'Update ID' : 'Upload ID' }}
          </button>
        </div>
      </div>
      <div class="record-card">
        <div class="record-icon">ğŸ”’</div>
        <div class="record-content">
          <h4>Privacy Policy</h4>
          <p>{{ currentUser?.policySigned ? 'âœ“ Accepted' : 'âš  Not accepted' }}</p>
          <button class="btn-secondary" (click)="viewPrivacyPolicy()">
            View Policy
          </button>
        </div>
      </div>
      <div class="record-card">
        <div class="record-icon">ğŸª</div>
        <div class="record-content">
          <h4>Cookie Policy</h4>
          <p>{{ currentUser?.disclaimerSigned ? 'âœ“ Accepted' : 'âš  Not accepted' }}</p>
          <button class="btn-secondary" (click)="viewCookiePolicy()">
            View Policy
          </button>
        </div>
      </div>
      <div class="record-card">
        <div class="record-icon">ğŸ“‹</div>
        <div class="record-content">
          <h4>Terms & Conditions</h4>
          <p>{{ currentUser?.termsSigned ? 'âœ“ Accepted' : 'âš  Not accepted' }}</p>
          <button class="btn-secondary" (click)="viewTermsConditions()">
            View Terms
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="activity-section">
    <h2>Recent Activity</h2>
    <div class="activity-list" *ngIf="recentActivity.length > 0">
      <div class="activity-item" *ngFor="let activity of recentActivity">
        <div class="activity-icon" [class]="activity.type">
          <span>{{ getActivityIcon(activity.type) }}</span>
        </div>
        <div class="activity-content">
          <h4>{{ activity.title }}</h4>
          <p>{{ activity.description }}</p>
          <span class="activity-time">{{ getTimeAgo(activity.timestamp) }}</span>
        </div>
      </div>
    </div>
    <div class="empty-state" *ngIf="recentActivity.length === 0">
      <div class="empty-icon">ğŸ“Š</div>
      <h3>No recent activity</h3>
      <p>Your recent actions will appear here.</p>
    </div>
  </div>

  <!-- Data Management -->
  <app-data-manager></app-data-manager>

  <!-- Account Actions -->
  <div class="account-actions">
    <button class="btn-danger" (click)="logout()">
      Sign Out
    </button>
  </div>
</div>