<div class="digital-page">
  <div class="page-header">
    <h1>Digital Timepieces</h1>
    <p>High-end digital watches for collectors and Apple Watches</p>
  </div>

  <!-- Tab Navigation -->
  <div class="tab-navigation">
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'collectors'"
      (click)="setActiveTab('collectors')">
      Collector Digital Watches
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'apple-watch'"
      (click)="setActiveTab('apple-watch')">
      Apple Watch
    </button>
  </div>

  <!-- Search and Filters -->
  <div class="search-filters">
    <div class="search-bar">
      <input 
        type="text" 
        [(ngModel)]="searchQuery" 
        (input)="applyFilters()"
        placeholder="Search watches..."
        class="search-input">
    </div>

    <div class="filters-row">
      <!-- Price Range Filter -->
      <div class="filter-group">
        <label for="price-range">Price Range</label>
        <select id="price-range" [(ngModel)]="selectedPriceRange" (change)="applyFilters()">
          <option value="">All Prices</option>
          <option value="under-500">Under $500</option>
          <option value="500-1000">$500 - $1,000</option>
          <option value="1000-2000">$1,000 - $2,000</option>
          <option value="over-2000">Over $2,000</option>
        </select>
      </div>

      <!-- Condition Filter -->
      <div class="filter-group">
        <label for="condition">Condition</label>
        <select id="condition" [(ngModel)]="selectedCondition" (change)="applyFilters()">
          <option value="">All Conditions</option>
          <option value="excellent">Excellent</option>
          <option value="very-good">Very Good</option>
          <option value="good">Good</option>
          <option value="fair">Fair</option>
        </select>
      </div>

      <!-- Dynamic Filters based on active tab -->
      <div class="filter-group" *ngIf="activeTab === 'collectors'">
        <label for="brand">Brand</label>
        <select id="brand" [(ngModel)]="selectedBrand" (change)="applyFilters()">
          <option value="">All Brands</option>
          <option *ngFor="let brand of getAvailableBrands()" [value]="brand">
            {{ brand }}
          </option>
        </select>
      </div>

      <div class="filter-group" *ngIf="activeTab === 'apple-watch'">
        <label for="series">Series</label>
        <select id="series" [(ngModel)]="selectedSeries" (change)="applyFilters()">
          <option value="">All Series</option>
          <option *ngFor="let series of getAvailableSeries()" [value]="series">
            {{ series }}
          </option>
        </select>
      </div>

      <div class="filter-group" *ngIf="activeTab === 'apple-watch'">
        <label for="connectivity">Connectivity</label>
        <select id="connectivity" [(ngModel)]="selectedConnectivity" (change)="applyFilters()">
          <option value="">All</option>
          <option value="gps">GPS Only</option>
          <option value="cellular">GPS + Cellular</option>
        </select>
      </div>
    </div>

    <button class="clear-filters-btn" (click)="clearFilters()">Clear Filters</button>
  </div>

  <!-- Collectors Digital Watches Tab -->
  <div class="tab-content" *ngIf="activeTab === 'collectors'">
    <div class="section-header">
      <h2>Collector Digital Watches</h2>
      <p>Premium digital timepieces for serious collectors</p>
      <button class="sell-btn" (click)="navigateToSell()">Sell Your Digital Watch</button>
    </div>

    <div class="watches-grid" *ngIf="filteredDigitalWatches.length > 0">
      <div class="watch-card" *ngFor="let watch of filteredDigitalWatches">
        <div class="watch-image">
          <img [src]="watch.imageUrl" [alt]="watch.name" class="watch-img">
          <div class="rarity-badge" [class]="watch.rarity">{{ watch.rarity }}</div>
        </div>
        
        <div class="watch-info">
          <h3 class="watch-name">{{ watch.name }}</h3>
          <p class="watch-brand">{{ watch.brand }} {{ watch.model }}</p>
          <p class="watch-year">{{ watch.year }}</p>
          
          <div class="watch-features">
            <span class="feature-tag" *ngFor="let feature of watch.features.slice(0, 3)">
              {{ feature }}
            </span>
          </div>
          
          <div class="watch-price">
            <span class="price">${{ watch.price.toLocaleString() }}</span>
            <span class="condition">{{ watch.condition }}</span>
          </div>
          
          <div class="authentication-status" [class]="watch.authenticationStatus">
            {{ watch.authenticationStatus }}
          </div>
        </div>
        
        <div class="watch-actions">
          <button class="share-btn" (click)="shareWatch(watch)" title="Share this listing">
            Share
          </button>
          <button class="bid-btn" (click)="placeBid(watch)" title="Place a bid">
            Place Bid
          </button>
          <button class="buy-now-btn" (click)="purchaseWatch(watch)" title="Purchase immediately">
            Purchase
          </button>
        </div>
      </div>
    </div>

    <div class="no-watches" *ngIf="filteredDigitalWatches.length === 0">
      <p>No digital watches found matching your criteria.</p>
      <button class="clear-filters-btn" (click)="clearFilters()">Clear Filters</button>
    </div>
  </div>

  <!-- Apple Watch Tab -->
  <div class="tab-content" *ngIf="activeTab === 'apple-watch'">
    <div class="section-header">
      <h2>Apple Watch</h2>
      <p>All Apple Watch models and series</p>
      <button class="sell-btn" (click)="navigateToSell()">Sell Your Apple Watch</button>
    </div>

    <div class="watches-grid" *ngIf="filteredAppleWatches.length > 0">
      <div class="watch-card" *ngFor="let watch of filteredAppleWatches">
        <div class="watch-image">
          <img [src]="watch.imageUrl" [alt]="watch.name" class="watch-img">
          <div class="series-badge">{{ watch.series }}</div>
        </div>
        
        <div class="watch-info">
          <h3 class="watch-name">{{ watch.name }}</h3>
          <p class="watch-series">{{ watch.series }} â€¢ {{ watch.size }}</p>
          <p class="watch-connectivity">{{ watch.connectivity === 'cellular' ? 'GPS + Cellular' : 'GPS Only' }}</p>
          
          <div class="watch-specs">
            <span class="spec-tag">{{ watch.material }}</span>
            <span class="spec-tag">{{ watch.storage }}</span>
            <span class="spec-tag">{{ watch.color }}</span>
          </div>
          
          <div class="watch-features">
            <span class="feature-tag" *ngIf="watch.features.appleCare">AppleCare+</span>
            <span class="feature-tag" *ngIf="watch.features.findMy">Find My</span>
            <span class="feature-tag" *ngIf="watch.features.activationLock">Activation Lock</span>
            <span class="feature-tag" *ngIf="watch.features.originalBox">Original Box</span>
          </div>
          
          <div class="watch-price">
            <span class="price">${{ watch.price.toLocaleString() }}</span>
            <span class="condition">{{ watch.condition }}</span>
          </div>
          
          <div class="watch-details">
            <p class="watchos">watchOS {{ watch.watchOS }}</p>
            <p class="battery">Battery: {{ watch.batteryHealth }}%</p>
          </div>
          
          <div class="authentication-status" [class]="watch.authenticationStatus">
            {{ watch.authenticationStatus }}
          </div>
        </div>
        
        <div class="watch-actions">
          <button class="view-details-btn" (click)="viewWatchDetails(watch)">
            View Details
          </button>
          <button class="contact-seller-btn" (click)="contactSeller(watch)">
            Contact Seller
          </button>
          <button class="make-offer-btn" (click)="makeOffer(watch)">
            Make Offer
          </button>
        </div>
      </div>
    </div>

    <div class="no-watches" *ngIf="filteredAppleWatches.length === 0">
      <p>No Apple Watches found matching your criteria.</p>
      <button class="clear-filters-btn" (click)="clearFilters()">Clear Filters</button>
    </div>
  </div>
</div>
